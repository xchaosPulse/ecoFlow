<!DOCTYPE html>
<html lang="fa" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุชุญูู ุจูุฏุฌู ฑดฐต: ุงุตูุงุญ ูุฑุฎ ุงุฑุฒ ุชุฑุฌุญ</title>
    <meta property="og:title" content="ุชุญูู ุจูุฏุฌู ฑดฐต: ุงุตูุงุญ ูุฑุฎ ุงุฑุฒ ุชุฑุฌุญ">
    <meta property="og:description" content="ุฏุงุดุจูุฑุฏ ุชุนุงูู ุจุฑุง ุดูุงูโุณุงุฒ ุฏุฑุขูุฏ ุญุงุตู ุงุฒ ยซุงุตูุงุญ ูุฑุฎ ุงุฑุฒ ุชุฑุฌุญยปุ ูุญุงุณุจู ุณูู ุณุฑุงูู ูุฑ ุงุฑุงูุ ู ููุงุณู ุขู ุจุง ุจูุฏุฌูโูุง ุญูุงุช ุจุฎุด ุณูุงูุช.">
    <meta property="og:image" content="https://raw.githubusercontent.com/scaleopshub/ecoflow/main/docs/assets/social_preview.png">
    <meta property="og:url" content="https://scaleopshub.github.io/ecoflow/docs/Budget_Analysis_1405_Dashboard.html">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="ุชุญูู ุจูุฏุฌู ฑดฐต: ุงุตูุงุญ ูุฑุฎ ุงุฑุฒ ุชุฑุฌุญ">
    <meta name="twitter:description" content="ุฏุงุดุจูุฑุฏ ุชุนุงูู ุจุฑุง ุดูุงูโุณุงุฒ ุฏุฑุขูุฏ ุญุงุตู ุงุฒ ยซุงุตูุงุญ ูุฑุฎ ุงุฑุฒ ุชุฑุฌุญยปุ ูุญุงุณุจู ุณูู ุณุฑุงูู ูุฑ ุงุฑุงูุ ู ููุงุณู ุขู ุจุง ุจูุฏุฌูโูุง ุญูุงุช ุจุฎุด ุณูุงูุช.">
    <meta name="twitter:image" content="https://raw.githubusercontent.com/scaleopshub/ecoflow/main/docs/assets/social_preview.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;700&display=swap');

        body {
            font-family: 'Vazirmatn', 'Tahoma', 'Segoe UI', sans-serif;
            background-color: #f8fafc;
            /* Slate 50 */
            color: #1e293b;
            /* Slate 800 */
        }

        .chart-container {
            position: relative;
            width: 100%;
            height: 300px;
            max-height: 350px;
        }

        /* Custom scrollbar for cleaner look */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }
    </style>
    <!-- Chosen Palette: Warm Neutrals & Professional Accents (Slate background, Emerald for income, Blue for health, Amber for highlights) -->
    <!-- Application Structure Plan:
         1. Hero Section: Title and core purpose.
         2. KPI Cards (Key Metrics): Immediate visualization of the 3 main numbers (Total Income, Per Capita, Health Budget).
         3. Interactive Analysis Section:
            - Left: Chart showing the scale of Health vs. General Reform budgets.
            - Right: Interactive 'Per Capita' calculator/explainer allowing users to toggle population assumptions.
         4. Flow Logic Section: Explaining the 'Collective-Expenditure' (Income-Expense) concept using a flow diagram metaphor with text and icons.
         5. Detailed Insights: Accordion/Cards for qualitative analysis (Health Priority, Purchasing Power).
         6. Footer: Sources.
         Rationale: This structure breaks down complex budget tables into digestible 'bite-sized' metrics, then allows comparison, and finally deep-dives into the implications.
    -->
    <!-- Visualization & Content Choices:
         - KPI Cards: HTML/Tailwind. Goal: Instant context.
         - Comparative Bar/Pie Chart: Chart.js. Goal: Compare the 57.2 Hemmat (General) vs 85 Hemmat (Health) to show prioritization.
         - Per Capita Calculator: JS + HTML inputs. Goal: Make the "56,000 Tomans" figure tangible and show sensitivity to population count.
         - Income-Expense Flow: Styled HTML/CSS cards with arrows. Goal: Explain 'Collective-Expenditure' without complex flowcharts.
         - NO SVG/Mermaid: All visuals are CSS shapes, Unicode, or Chart.js canvas.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>

<body class="bg-slate-50 min-h-screen flex flex-col">

    <!-- Navbar / Header -->
    <header class="bg-white shadow-sm border-b border-slate-200 sticky top-0 z-50">
        <div class="max-w-6xl mx-auto px-4 py-4 flex justify-between items-center">
            <div>
                <h1 class="text-xl md:text-2xl font-bold text-slate-800">ุชุญูู ุจูุฏุฌู ฑดฐต</h1>
                <p class="text-xs md:text-sm text-slate-500 mt-1">ุงุตูุงุญ ูุฑุฎ ุงุฑุฒ ุชุฑุฌุญ ู ุงุซุฑุงุช ุขู</p>
            </div>
            <div class="text-left">
                <span
                    class="inline-block bg-slate-100 text-slate-600 text-xs px-2 py-1 rounded border border-slate-300">ููุจุน:
                    ูุงุญู ุจูุฏุฌู ฑดฐต</span>
            </div>
        </div>
    </header>

    <main class="flex-grow max-w-6xl mx-auto w-full px-4 py-8 space-y-12">

        <!-- Intro Text -->
        <section>
            <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-6">
                <h2 class="text-lg font-bold text-slate-800 mb-3 border-r-4 border-emerald-500 pr-3">ููุง ฺฉู ฺฏุฒุงุฑุด</h2>
                <p class="text-slate-600 leading-relaxed text-justify">
                    ุงู ุฏุงุดุจูุฑุฏ ุชุนุงูู ุจุฑ ุงุณุงุณ ุงุฑูุงู ููุฏุฑุฌ ุฏุฑ <strong>ุฌุฏูู ุดูุงุฑู ฑด (ููุงุจุน ู ูุตุงุฑู ูุฏูููุฏุณุงุฒ
                        ุงุฑุงููโูุง)</strong> ูุงุญู ุจูุฏุฌู ุณุงู ฑดฐต ุทุฑุงุญ ุดุฏู ุงุณุช. ูุฏู ุขู ุดูุงูโุณุงุฒ ุฏุฑุขูุฏ ุญุงุตู ุงุฒ ยซุงุตูุงุญ
                    ูุฑุฎ ุงุฑุฒ ุชุฑุฌุญยปุ ูุญุงุณุจู ุณูู ุณุฑุงูู ูุฑ ุงุฑุงูุ ู ููุงุณู ุขู ุจุง ุจูุฏุฌูโูุง ุญูุงุช ุจุฎุด ุณูุงูุช ุงุณุช. ุงุฑูุงู ุจู
                    ยซูุฒุงุฑ ููุงุฑุฏ ุชููุงูยป (ููุช) ุง ยซุฑุงูยป ุจุงู ุดุฏูโุงูุฏ.
                </p>
            </div>
        </section>

        <!-- KPI Section: The Big Numbers -->
        <section class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <!-- Card 1: Total Revenue -->
            <div
                class="bg-white p-6 rounded-xl shadow-sm border border-slate-200 hover:shadow-md transition-shadow relative overflow-hidden group">
                <div class="absolute top-0 left-0 w-1 h-full bg-emerald-500"></div>
                <h3 class="text-slate-500 text-sm font-medium mb-1">ฺฉู ุฏุฑุขูุฏ ุณุงูุงูู (ุงุตูุงุญ ุงุฑุฒ)</h3>
                <div class="flex items-baseline gap-2">
                    <span class="text-3xl font-bold text-slate-800">ตท.ฒ</span>
                    <span class="text-sm text-slate-600">ูุฒุงุฑ ููุงุฑุฏ ุชููุงู</span>
                </div>
                <p class="text-xs text-slate-400 mt-3">ูุนุงุฏู ตุทฒฐุฐฐฐ ููุงุฑุฏ ุฑุงู (ุฑุฏู ฑฒ ููุงุจุน)</p>
            </div>

            <!-- Card 2: Per Capita -->
            <div
                class="bg-white p-6 rounded-xl shadow-sm border border-slate-200 hover:shadow-md transition-shadow relative overflow-hidden">
                <div class="absolute top-0 left-0 w-1 h-full bg-amber-500"></div>
                <h3 class="text-slate-500 text-sm font-medium mb-1">ุณุฑุงูู ูุงูุงูู ูุฑ ูุฑุฏ</h3>
                <div class="flex items-baseline gap-2">
                    <span class="text-3xl font-bold text-slate-800">ตถ</span>
                    <span class="text-sm text-slate-600">ูุฒุงุฑ ุชููุงู</span>
                </div>
                <p class="text-xs text-slate-400 mt-3">ูุญุงุณุจู ุจุฑ ุงุณุงุณ ุฌูุนุช ธต ูููู ููุฑ</p>
            </div>

            <!-- Card 3: Health Support -->
            <div
                class="bg-white p-6 rounded-xl shadow-sm border border-slate-200 hover:shadow-md transition-shadow relative overflow-hidden">
                <div class="absolute top-0 left-0 w-1 h-full bg-blue-500"></div>
                <h3 class="text-slate-500 text-sm font-medium mb-1">ุญูุงุช ุงุฒ ุฏุงุฑู ู ุณูุงูุช</h3>
                <div class="flex items-baseline gap-2">
                    <span class="text-3xl font-bold text-slate-800">ธต</span>
                    <span class="text-sm text-slate-600">ูุฒุงุฑ ููุงุฑุฏ ุชููุงู</span>
                </div>
                <p class="text-xs text-slate-400 mt-3">ุงุฑุงูู ุฏุงุฑู ู ุดุฑุฎุดฺฉ (ุฑุฏู ถ ูุตุงุฑู)</p>
            </div>
        </section>

        <!-- Analysis Section: Chart & Calculator -->
        <section class="grid grid-cols-1 lg:grid-cols-2 gap-8">

            <!-- Visualization: Comparison -->
            <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200 flex flex-col">
                <div class="mb-4">
                    <h3 class="text-lg font-bold text-slate-800 mb-2">ููุงุณู ููุงุจุน ู ูุตุงุฑู ุญูุงุช</h3>
                    <p class="text-sm text-slate-500">
                        ุฏุฑ ุงู ูููุฏุงุฑุ ุญุฌู ุฏุฑุขูุฏ ุญุงุตู ุงุฒ ุงุตูุงุญ ุงุฑุฒ ุชุฑุฌุญ (ฺฉู ุตุฑู ุฌุจุฑุงู ููุช ฺฉุงูุงูุง ุงุณุงุณ ูโุดูุฏ) ุจุง
                        ุจูุฏุฌู ุฌุฏุงฺฏุงูู ุญูุงุช ุงุฒ ุฏุงุฑู ููุงุณู ุดุฏู ุงุณุช.
                    </p>
                </div>
                <!-- Chart Container -->
                <div class="chart-container mx-auto">
                    <canvas id="budgetComparisonChart"></canvas>
                </div>
                <div class="mt-4 bg-blue-50 p-3 rounded text-xs text-blue-800 leading-relaxed border border-blue-100">
                    <strong>ูฺฉุชู ุชุญูู:</strong> ุฏููุช ุนูุงูู ุจุฑ ุฏุฑุขูุฏ ตท.ฒ ููุช ุงุตูุงุญ ุงุฑุฒุ ูุจูุบ ธต ููุช (ุญุฏูุฏ ฑ.ต ุจุฑุงุจุฑ)
                    ุฑุง ุตุฑูุงู ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุงูุฒุงุด ููุช ุฏุงุฑู ู ุชุฌูุฒุงุช ูพุฒุดฺฉ ุงุฎุชุตุงุต ุฏุงุฏู ุงุณุช.
                </div>
            </div>

            <!-- Interactive: Per Capita Calculator -->
            <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200 flex flex-col justify-between">
                <div>
                    <h3 class="text-lg font-bold text-slate-800 mb-2">ูุงุดูโุญุณุงุจ ุณุฑุงูู ุงุฑุงูู</h3>
                    <p class="text-sm text-slate-500 mb-6">
                        ุณูู ูุฑ ุงุฑุงู ุงุฒ ุฏุฑุขูุฏ ตท.ฒ ูุฒุงุฑ ููุงุฑุฏ ุชููุงู ฺูุฏุฑ ุงุณุชุ ุจุง ุชุบุฑ ุฌูุนุชุ ุชุบุฑุงุช ุฌุฒุฆ ุณุฑุงูู ุฑุง
                        ูุดุงูุฏู ฺฉูุฏ.
                    </p>

                    <!-- Input Controls -->
                    <div class="space-y-6">
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-2">
                                ุฌูุนุช ฺฉุดูุฑ (ูููู ููุฑ): <span id="populationDisplay"
                                    class="font-bold text-emerald-600">85</span>
                            </label>
                            <input type="range" id="populationInput" min="75" max="95" step="1" value="85"
                                class="w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-emerald-500">
                            <div class="flex justify-between text-xs text-slate-400 mt-1">
                                <span>ทต ูููู</span>
                                <span>นต ูููู</span>
                            </div>
                        </div>

                        <!-- Result Box -->
                        <div
                            class="bg-slate-50 border border-slate-200 rounded-lg p-5 text-center transition-all duration-300 hover:border-emerald-300">
                            <p class="text-slate-500 text-sm mb-1">ุณุฑุงูู ูุงูุงูู ูุฑ ูุฑุฏ</p>
                            <div class="flex items-center justify-center gap-2 text-emerald-600">
                                <span id="perCapitaResult" class="text-4xl font-bold">56,078</span>
                                <span class="text-lg">ุชููุงู</span>
                            </div>
                            <p class="text-xs text-slate-400 mt-2">
                                (ุฏุฑุขูุฏ ฺฉู ุณุงูุงูู รท ุฌูุนุช รท ฑฒ ูุงู)
                            </p>
                        </div>
                    </div>
                </div>

                <div class="mt-6 border-t border-slate-100 pt-4">
                    <p class="text-xs text-slate-500 leading-relaxed text-justify">
                        <span class="inline-block w-2 h-2 bg-amber-500 rounded-full ml-1"></span>
                        ุชูุฌู: ุงู ูุจูุบ ุจู ุตูุฑุช ุงุฑุงูู ููุฏ ูุณุชูู ูพุฑุฏุงุฎุช ููโุดูุฏุ ุจูฺฉู ุทุจู ุฌุฏุงูู ุจูุฏุฌู (ุฌูุน-ุฎุฑุฌ) ุตุฑู
                        ุฌุจุฑุงู ูุงุจูโุงูุชูุงูุช ููุชโูุง ุฏุฑ ุฒูุฌุฑู ุชุฃูู ฺฉุงูุง ูโุดูุฏ.
                    </p>
                </div>
            </div>
        </section>

        <!-- Logic Flow: Income-Expense Concept -->
        <section>
            <div class="mb-4">
                <h3 class="text-lg font-bold text-slate-800 border-r-4 border-amber-500 pr-3">ููููู ยซุฌูุน-ุฎุฑุฌยป ุฏุฑ ุจูุฏุฌู
                </h3>
                <p class="text-sm text-slate-600 mt-2">
                    ุงู ุฏุฑุขูุฏ ฺฺฏููู ูุฏุฑุช ูโุดูุฏุ ุทุจู ุชุจุตุฑูโูุงุ ุฏููุช ุฏุฑุขูุฏ ุญุงุตูู ุฑุง ุนูุงู ุจุฑุง ูุฒูู ููุงู ุจุฎุด ูุตุฑู
                    ูโฺฉูุฏ.
                </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 items-stretch">
                <!-- Step 1 -->
                <div class="bg-white border-l-4 border-emerald-500 p-5 rounded shadow-sm flex flex-col gap-2">
                    <div class="flex justify-between items-start">
                        <span class="text-xs font-bold bg-emerald-100 text-emerald-700 px-2 py-1 rounded">ููุงุจุน
                            (ูุฑูุฏ)</span>
                        <span class="text-xl">๐ฅ</span>
                    </div>
                    <h4 class="font-bold text-slate-700">ุงุตูุงุญ ูุฑุฎ ุงุฑุฒ</h4>
                    <p class="text-sm text-slate-500">ฺฉุณุจ ุฏุฑุขูุฏ ตทฒ ูุฒุงุฑ ููุงุฑุฏ ุฑุงู ุงุฒ ูุญู ุชุบุฑ ูุฑุฎ ุงุฑุฒ ุชุฑุฌุญ.</p>
                </div>

                <!-- Step 2 (Arrow for Desktop) -->
                <div class="hidden md:flex flex-col items-center justify-center text-slate-300">
                    <span class="text-4xl">โ</span>
                    <span class="text-xs font-medium">ุชุฎุตุต ฑฐฐูช</span>
                </div>
                <!-- Arrow for Mobile -->
                <div class="md:hidden flex justify-center text-slate-300 py-2">
                    <span class="text-2xl">โฌ</span>
                </div>

                <!-- Step 3 -->
                <div class="bg-white border-l-4 border-red-400 p-5 rounded shadow-sm flex flex-col gap-2">
                    <div class="flex justify-between items-start">
                        <span class="text-xs font-bold bg-red-100 text-red-700 px-2 py-1 rounded">ูุตุงุฑู (ุฎุฑูุฌ)</span>
                        <span class="text-xl">๐ค</span>
                    </div>
                    <h4 class="font-bold text-slate-700">ุฌุจุฑุงู ูุฒููโูุง</h4>
                    <p class="text-sm text-slate-500">ูพุฑุฏุงุฎุช ตทฒ ูุฒุงุฑ ููุงุฑุฏ ุฑุงู ุจุงุจุช ูุงุจูโุงูุชูุงูุช ูุฑุฎ ุงุฑุฒ ุจุฑุง
                        ุฌููฺฏุฑ ุงุฒ ฺฏุฑุงู.</p>
                </div>
            </div>
        </section>

        <!-- Detailed Breakdown -->
        <section class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
            <div class="p-4 bg-slate-50 border-b border-slate-200">
                <h3 class="font-bold text-slate-700">ุฌุฒุฆุงุช ู ูฺฉุงุช ุชฺฉูู ูุงุญู</h3>
            </div>
            <div class="divide-y divide-slate-100">
                <div class="p-4 hover:bg-slate-50 transition-colors cursor-default">
                    <h4 class="font-bold text-sm text-slate-800 mb-1">๐ ุซุจุงุช ูุฏุฑุช ุฎุฑุฏ</h4>
                    <p class="text-sm text-slate-600 text-justify">
                        ุนุฏุฏ ตถ ูุฒุงุฑ ุชููุงู ุฏุฑ ูุงู ุจู ุงุฒุง ูุฑ ููุฑุ ูุดุงูโุฏููุฏู ูุฒุงู ุญูุงุช ุงุณุช ฺฉู ุฏููุช ุณุน ุฏุงุฑุฏ ุงุฒ ุทุฑู
                        ฺฉูุชุฑู ููุชโูุง (ูู ูพุฑุฏุงุฎุช ููุฏ) ุจู ุณูุฑู ุฎุงููุงุฑ ุชุฒุฑู ฺฉูุฏ.
                    </p>
                </div>
                <div class="p-4 hover:bg-slate-50 transition-colors cursor-default">
                    <h4 class="font-bold text-sm text-slate-800 mb-1">๐ ุงูููุช ูฺู ุณูุงูุช</h4>
                    <p class="text-sm text-slate-600 text-justify">
                        ุจูุฏุฌู ุฏุงุฑู (ธต ููุช) ฺฉุงููุงู ุฌุฏุง ุงุฒ ุฏุฑุขูุฏ ุงุตูุงุญ ูุฑุฎ ุงุฑุฒ ฺฉุงูุงูุง ุงุณุงุณ (ตท.ฒ ููุช) ุงุณุช. ุงู ูุดุงู
                        ูโุฏูุฏ ฺฉู ุญุณุงุณุช ุฏููุช ุฑู ูุฒููโูุง ุฏุฑูุงู ุจุณุงุฑ ุจุงูุงุชุฑ ุงุฒ ุณุงุฑ ุจุฎุดโูุงุณุช.
                    </p>
                </div>
                <div class="p-4 hover:bg-slate-50 transition-colors cursor-default">
                    <h4 class="font-bold text-sm text-slate-800 mb-1">โ๏ธ ุฑุณฺฉ ุชุญูู ููุงุจุน</h4>
                    <p class="text-sm text-slate-600 text-justify">
                        ุงุฒ ุขูุฌุง ฺฉู ุงู ุฏุฑุขูุฏ ูุงุจุณุชู ุจู ูุฑุฎ ุงุฑุฒ ุงุณุชุ ููุณุงูุงุช ุจุงุฒุงุฑ ุงุฑุฒ ูโุชูุงูุฏ ูุณุชููุงู ุฑู ุงู ุฑุฏู
                        ุจูุฏุฌู ุงุซุฑ ุจฺฏุฐุงุฑุฏ. ุงฺฏุฑ ูุฑุฎ ุงุฑุฒ ุชุบุฑ ฺฉูุฏุ ูู ุฏุฑุขูุฏ ู ูู ูุฒูู ูุงุจูโุงูุชูุงูุช ุชุบุฑ ุฎูุงูุฏ ฺฉุฑุฏ.
                    </p>
                </div>
            </div>
        </section>

    </main>

    <footer class="bg-slate-800 text-slate-300 py-8 mt-auto">
        <div class="max-w-6xl mx-auto px-4 text-center space-y-2">
            <p class="text-sm">ุทุฑุงุญ ุดุฏู ุจุฑุง ุชุญูู ูุงุญู ุจูุฏุฌู ฑดฐต</p>
            <p class="text-xs text-slate-500">ููุงุจุน ุฏุงุฏูโูุง: ุฌุฏุงูู ูพูุณุช ูุฏูููุฏุณุงุฒ ุงุฑุงููโูุง (ุตูุญุงุช ทดตุ ทดทุ ทดธ ู
                ทตฑ)</p>
        </div>
    </footer>

    <script>
        // --- State Management ---
        const budgetData = {
            totalRevenue: 57200000000000, // 57.2 Hemmat in Tomans (approx calculation base)
            healthBudget: 85000000000000, // 85 Hemmat
            basePopulation: 85000000,

            // Format helpers
            formatCurrency: (num) => {
                return new Intl.NumberFormat('fa-IR').format(Math.round(num));
            }
        };

        // --- DOM Elements ---
        const popInput = document.getElementById('populationInput');
        const popDisplay = document.getElementById('populationDisplay');
        const perCapitaDisplay = document.getElementById('perCapitaResult');

        // --- Logic: Calculator ---
        function updateCalculator() {
            const population = parseInt(popInput.value) * 1000000; // Convert millions to actual

            // 57.2 Thousand Billion Tomans = 57,200,000,000,000 Tomans
            // But wait, source says 572,000 Billion Rials = 57,200 Billion Tomans.
            // Let's stick to the source math:
            // Total Annual Income Rials: 572,000,000,000,000
            // Monthly Rials: 47,666,666,666,666
            // Monthly Tomans: 4,766,666,666,666

            const totalAnnualTomans = 57200000000000;
            const monthlyTomans = totalAnnualTomans / 12;
            const perCapita = monthlyTomans / population;

            // Update UI
            popDisplay.textContent = new Intl.NumberFormat('fa-IR').format(popInput.value);
            perCapitaDisplay.textContent = budgetData.formatCurrency(perCapita);
        }

        // Event Listener for Slider
        popInput.addEventListener('input', updateCalculator);

        // --- Logic: Charts ---
        document.addEventListener('DOMContentLoaded', () => {

            // Initial calc
            updateCalculator();

            // Chart: Budget Comparison
            const ctx = document.getElementById('budgetComparisonChart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['ุงุตูุงุญ ุงุฑุฒ ฺฉุงูุงูุง ุงุณุงุณ', 'ุญูุงุช ุงุฒ ุฏุงุฑู ู ุณูุงูุช'],
                    datasets: [{
                        label: 'ูุจูุบ (ูุฒุงุฑ ููุงุฑุฏ ุชููุงู)',
                        data: [57.2, 85],
                        backgroundColor: [
                            'rgba(16, 185, 129, 0.7)', // Emerald for General
                            'rgba(59, 130, 246, 0.7)'  // Blue for Health
                        ],
                        borderColor: [
                            'rgb(16, 185, 129)',
                            'rgb(59, 130, 246)'
                        ],
                        borderWidth: 1,
                        borderRadius: 6
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            titleFont: { family: 'Vazirmatn' },
                            bodyFont: { family: 'Vazirmatn' },
                            callbacks: {
                                label: function (context) {
                                    return context.raw + ' ูุฒุงุฑ ููุงุฑุฏ ุชููุงู';
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: '#f1f5f9'
                            },
                            ticks: {
                                font: { family: 'Vazirmatn' }
                            },
                            title: {
                                display: true,
                                text: 'ูุฒุงุฑ ููุงุฑุฏ ุชููุงู',
                                font: { family: 'Vazirmatn' }
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            },
                            ticks: {
                                font: { family: 'Vazirmatn', size: 12 }
                            }
                        }
                    }
                }
            });
        });

    </script>
</body>

</html>
